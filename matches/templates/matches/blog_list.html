{% extends "base.html" %}

{% block title %}Blog{% endblock %}

{% block content %}
  <h2 style="color: #4a4a4a; text-align: center; margin-bottom: 30px;">Blog Posts</h2>
  
  <div class="list-group">
    {% for post in page_obj %}
      <a href="{% url 'blog_post_detail' post.pk %}" 
         class="list-group-item list-group-item-action d-flex align-items-center post-item" 
         style="border-radius: 12px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); margin-bottom: 20px; padding: 15px; background-color: #fdfdfd;">
        {% if post.image_url %}
          <img src="{{ post.image_url }}" alt="{{ post.title }}" 
               class="post-image" 
               style="width: 150px; height: auto; border-radius: 8px; margin-right: 15px;">
        {% endif %}
        <div>
          <h5 class="mb-1" style="color: #2d2d2d;">{{ post.title }}</h5>
          <p class="mb-1" style="color: #707070;">{{ post.excerpt }}</p>
          <small style="color: #9e9e9e;">{{ post.published_date }}</small>
        </div>
      </a>
    {% endfor %}
  </div>

  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center" style="margin-top: 30px;">
      {% if page_obj.has_previous %}
        <li class="page-item">
          <a class="page-link" href="?page=1" aria-label="First" style="color: #007bff;">
            <span aria-hidden="true">&laquo;&laquo;</span>
          </a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous" style="color: #007bff;">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
      {% endif %}

      {% for num in page_obj.paginator.page_range %}
        {% if page_obj.number == num %}
          <li class="page-item active">
            <span class="page-link" style="background-color: #007bff; border-color: #007bff;">{{ num }}</span>
          </li>
        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
          <li class="page-item">
            <a class="page-link" href="?page={{ num }}" style="color: #007bff;">{{ num }}</a>
          </li>
        {% endif %}
      {% endfor %}

      {% if page_obj.has_next %}
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next" style="color: #007bff;">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}" aria-label="Last" style="color: #007bff;">
            <span aria-hidden="true">&raquo;&raquo;</span>
          </a>
        </li>
      {% endif %}
    </ul>
  </nav>

  <style>
    /* Modern Styling */
    .post-item:hover {
      box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
      transition: all 0.3s ease;
    }

    .page-link {
      border-radius: 50%;
      padding: 0.5rem 0.75rem;
      transition: all 0.3s ease;
    }

    .page-link:hover {
      background-color: #007bff;
      color: white;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .post-image {
        width: 100px;
      }
    }

    @media (max-width: 500px) {
      .post-image {
        width: 70px;
      }

      .list-group-item {
        flex-direction: column;
        align-items: flex-start;
      }

      .list-group-item h5 {
        font-size: 1.1rem;
      }

      .pagination {
        flex-wrap: wrap;
      }

      .pagination .page-link {
        margin: 5px 0;
      }
    }
  </style>

{% endblock %}


